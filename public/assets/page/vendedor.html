<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Home vendedor</title>
		<link rel="stylesheet" href="../css/style.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
		<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

		<!-- después hay que sacarlo -->
		<style>
			/* Oculta cualquier botón de acción que el JS inyecte */
			    .btn-editar,
			    .btn-eliminar,
			    .btn-update,
			    .btn-delete {
			      display: none !important;
			    }
			
			    /* Si el JS agrega la última columna de acciones, la escondemos */
			    th:last-child,
			    td:last-child {
			      display: none !important;
			    }
			
		</style>
	</head>

	<body class="admin-page">
		<div class="admin-container">

			<!-- Header -->
			<header class="admin-header">
				<img src="../img/logo-fndo-blanco.png" alt="icono" width="70" height="70" class="logo">
				<a href="../page/home_admin.html" class="logo">Pastelería mil sabores</a>
			</header>

			<!-- Sidebar -->
			<aside class="admin-sidebar">
				<div class="sidebar-admin"></div>

				<div class="sidebar-section">
					<ul class="sidebar-menu">
						<li class="menu-item">
							<a href="#dashboard" class="menu-link">
								<i class="bi bi-speedometer2 menu-icon"></i> Dashboard
							</a>
						</li>
						<li class="menu-item">
							<a href="#ordenes" class="menu-link">
								<i class="bi bi-clipboard-check menu-icon"></i> Órdenes
							</a>
						</li>
						<li class="menu-item">
							<a href="#productos" class="menu-link">
								<i class="bi bi-box-seam menu-icon"></i> Productos
							</a>
						</li>
					</ul>
				</div>

				<div class="sidebar-section">
					<h3 class="sidebar-title">Cuenta</h3>
					<ul class="sidebar-menu">
						<li class="menu-item">
							<a href="#perfil" class="menu-link">
								<i class="bi bi-person menu-icon"></i> Perfil
							</a>
						</li>
					</ul>
				</div>

				<div class="sidebar-section sidebar-actions">
					<button class="action-btn btn-store" onclick="irATienda()">
          <i class="bi bi-shop menu-icon"></i> Tienda
        </button>
					<button id="btnCerrarSesion" class="action-btn btn-logout">
          <i class="bi bi-box-arrow-right menu-icon"></i> Cerrar Sesión
        </button>
				</div>
			</aside>

			<!-- Contenido Principal -->
			<main class="admin-main">

				<!-- Dashboard -->
				<section id="dashboard">
					<h2 class="sidebar-title">Resumen General</h2>

					<!-- Cards principales -->
					<div class="dashboard-cards-row" style="display:flex; justify-content:center; gap:20px;">
						<div class="summary-card blue-card" style="min-width:270px; min-height:170px;">
							<div class="card-content">
								<div class="card-icon"><i class="bi bi-cart"></i></div>
								<div class="card-info">
									<h3 class="card-title">Compras</h3>
									<p class="card-value" id="totalCompras">0</p>
									<p class="card-subtitle">
										Probabilidad de aumento: <span id="proyeccionCompras">0</span>%
									</p>
								</div>
							</div>
						</div>

						<div class="summary-card green-card" style="min-width:270px; min-height:170px;">
							<div class="card-content">
								<div class="card-icon"><i class="bi bi-box"></i></div>
								<div class="card-info">
									<h3 class="card-title">Productos</h3>
									<p class="card-value" id="totalProductos">0</p>
									<p class="card-subtitle">
										Inventario Actual: <span id="inventarioTotal">0</span>
									</p>
								</div>
							</div>
						</div>
					</div>

					<!-- Navegación -->
					<div class="navigation-grid" style="display:flex; justify-content:center; flex-wrap:wrap; gap:20px;">
						<div class="navigation-row" style="display:flex; gap:20px;">
							<div class="nav-button" onclick="navegarA('dashboard')">
								<div class="nav-icon"><i class="bi bi-speedometer2"></i></div>
								<h1 class="nav-title">Dashboard</h1>
								<p class="nav-description">Visión general de todas las métricas del sistema.</p>
							</div>

							<div class="nav-button" onclick="navegarA('ordenes')">
								<div class="nav-icon"><i class="bi bi-cart-check"></i></div>
								<h1 class="nav-title">Órdenes</h1>
								<p class="nav-description">Seguimiento de todas las órdenes de compras realizadas.</p>
							</div>

							<div class="nav-button" onclick="navegarA('productos')">
								<div class="nav-icon"><i class="bi bi-box"></i></div>
								<h1 class="nav-title">Productos</h1>
								<p class="nav-description">Visualizar inventario y detalles de los productos disponibles.</p>
							</div>
						</div>
					</div>
				</section>

				<!-- Órdenes solo lectura -->
				<section id="ordenes" style="display: none;">
					<div class="welcome-section">
						<h2 class="welcome-title">Órdenes</h2>
						<p class="welcome-subtitle">Visualización de las órdenes de compra</p>
					</div>

					<div class="crud-container">
						<div class="crud-header">
							<h3>Lista de Órdenes</h3>
							<div class="crud-actions">
								<button class="btn btn-secondary" onclick="cargarOrdenes()">
                <i class="bi bi-arrow-repeat"></i> Actualizar
              </button>
							</div>
						</div>

						<div class="table-responsive">
							<table class="crud-table">
								<thead>
									<tr>
										<th>ID</th>
										<th>Cliente</th>
										<th>Total</th>
										<th>Estado</th>
										<th>Fecha</th>
										<th style="text-align:center;">fecha</th>
									</tr>
								</thead>
								<tbody id="ordenes-tbody">
									<tr>
										<td colspan="5" class="no-data">
											Haz clic en Actualizar para cargar las órdenes
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</section>

				<!-- Productos solo lectura -->
				<section id="productos" style="display: none;">
					<div class="welcome-section">
						<h2 class="welcome-title">Productos</h2>
						<p class="welcome-subtitle">Visualización del inventario</p>
					</div>

					<div class="crud-container">
						<div class="crud-header">
							<h3>Lista de Productos</h3>
							<div class="crud-actions">
								<button class="btn btn-secondary" onclick="cargarProductos()">
                <i class="bi bi-arrow-repeat"></i> Actualizar
              </button>
							</div>
						</div>

						<div class="table-responsive">
							<table class="crud-table">
								<thead>
									<tr>
										<th>Nombre</th>
										<th>Precio</th>
										<th>Stock</th>
										<th>Categoría</th>
										<th>Estado</th>
										<th style="text-align:center;">Vista</th>
									</tr>
								</thead>
								<tbody id="productos-tbody">
									<tr>
										<td colspan="5" class="no-data">
											Haz clic en Actualizar para cargar los productos
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</section>

				<!-- Perfil solo lectura -->
				<section id="perfil" style="display: none;">
					<div class="welcome-section">
						<h2 class="welcome-title">Perfil de Usuario</h2>
						<p class="welcome-subtitle">Solo visualización de información personal</p>
					</div>

					<div class="crud-container">
						<div class="profile-form">
							<form>
								<div class="form-group">
									<label for="profileNombre">Nombre Completo</label>
									<input type="text" id="profileNombre" value="" readonly>
								</div>

								<div class="form-group">
									<label for="profileCorreo">Email</label>
									<input type="email" id="profileCorreo" value="" readonly>
								</div>
							</form>
						</div>
					</div>
				</section>

			</main>
		</div>

		<!-- Scripts -->
		<script src="../JS/saludo.js"></script>
		<script src="../JS/home_admin.js"></script>
		<script src="../JS/dashboard.js"></script>
		<script src="../JS/crud-functions.js"></script>
	</body>
</html>